"use strict";(self.webpackChunkarmeria_site=self.webpackChunkarmeria_site||[]).push([[1225],{72047:function(e,t,r){r.r(t),r.d(t,{_frontmatter:function(){return p},default:function(){return g},pageTitle:function(){return s}});var a=r(63366),i=(r(67294),r(64983)),n=r(89791),l=r(75609),o=["components"],s="Thrift tutorial introduction",p={},m=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",t)}},c=m("Tip"),h=m("CodeBlock"),u={pageTitle:s,_frontmatter:p},d=n.Z;function g(e){var t=e.components,r=(0,a.Z)(e,o);return(0,i.kt)(d,Object.assign({},u,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"thrift-tutorial-introduction",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h1",href:"#thrift-tutorial-introduction","aria-label":"thrift tutorial introduction permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Thrift tutorial introduction"),(0,i.kt)("h6",{className:"inlinePageToc",role:"navigation"},"Table of contents"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#background"},"Background"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#assumptions"},"Assumptions"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#prerequisites"},"Prerequisites"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#sample-service"},"Sample service")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#sample-service-structure"},"Sample service structure")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#buildgradle"},"build.gradle")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#build-and-run-sample-service"},"Build and run sample service"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#try-writing-blog-service-yourself"},"Try writing blog service yourself")))),(0,i.kt)("p",null,"In this tutorial, you'll learn how to build an ",(0,i.kt)("a",{parentName:"p",href:"https://thrift.apache.org/"},"Apache Thrift")," service with Armeria."),(0,i.kt)("p",null,"This tutorial is based on a ",(0,i.kt)("a",{parentName:"p",href:"#sample-service"},"sample service"),", a minimal blog service, with which you can create, read, update, and delete blog posts.\nTo keep our focus on Armeria, this tutorial and the sample service implement memory-based operations instead of using database."),(0,i.kt)("p",null,"Follow this tutorial to write a service yourself or try ",(0,i.kt)("a",{parentName:"p",href:"#build-and-run-sample-service"},"running the sample service")," right away."),(0,i.kt)("h2",{id:"background",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#background","aria-label":"background permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Background"),(0,i.kt)("p",null,"Before we start, let's swiftly go over Armeria's Thrift features:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Transport over HTTP/1.1 or HTTP/2."),(0,i.kt)("li",{parentName:"ul"},"Support for ",(0,i.kt)("inlineCode",{parentName:"li"},"TBINARY"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"TCOMPACT"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"TJSON")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"TTEXT")," ",(0,i.kt)("a",{parentName:"li",href:"/docs/server-thrift#serialization-formats"},"serialization formats"),"."),(0,i.kt)("li",{parentName:"ul"},"RPC level decorator support for both ",(0,i.kt)("a",{parentName:"li",href:"/docs/client-decorator#implementing-decoratinghttpclientfunction-and-decoratingrpcclientfunction"},"client"),"\nand ",(0,i.kt)("a",{parentName:"li",href:"/docs/server-decorator#implementing-decoratinghttpservicefunction-and-decoratingrpcservicefunction"},"server"),".",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Out of the box support for circuit breaker, retries, metric collection and more."))),(0,i.kt)("li",{parentName:"ul"},"Full-fledged ",(0,i.kt)("a",{parentName:"li",href:"/docs/server-docservice"},"Thrift documentation service"),".")),(0,i.kt)("h2",{id:"assumptions",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#assumptions","aria-label":"assumptions permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Assumptions"),(0,i.kt)("p",null,"This tutorial assumes that you have:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Experience in building services in Java"),(0,i.kt)("li",{parentName:"ul"},"Experience in Java frameworks for server-side programming"),(0,i.kt)("li",{parentName:"ul"},"Understanding of Apache Thrift and experience in implementing Thrift services")),(0,i.kt)("h2",{id:"prerequisites",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#prerequisites","aria-label":"prerequisites permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Prerequisites"),(0,i.kt)("p",null,"To run and develop the sample service, set your computer with the following requirements:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"JDK 11 or higher"),(0,i.kt)("li",{parentName:"ul"},"Thrift compiler: Install a thrift compiler by either ",(0,i.kt)("a",{parentName:"li",href:"https://thrift.apache.org/docs/install/"},"building from source")," or using a package manager like ",(0,i.kt)("inlineCode",{parentName:"li"},"brew")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"apt")," depending on your environment.")),(0,i.kt)("h2",{id:"sample-service",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#sample-service","aria-label":"sample service permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Sample service"),(0,i.kt)("p",null,"The sample service provides you implementations of CRUD operations with corresponding service methods."),(0,i.kt)("h3",{id:"sample-service-structure",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h3",href:"#sample-service-structure","aria-label":"sample service structure permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Sample service structure"),(0,i.kt)("p",null,"The ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria-examples/tree/main/tutorials/thrift"},"sample service code")," consists of the following folders and files."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"thrift-server/\n├─ src/\n│  ├─ main/\n│  │  ├─ java/\n│  │  │  ├─ example.armeria.server.blog.thrift/\n│  │  │  │  ├─ BlogClient.java\n│  │  │  │  ├─ BlogServiceExceptionHandler.java\n│  │  │  │  ├─ BlogServiceImpl.java\n│  │  │  │  └─ Main.java\n│  │  ├─ thrift/\n│  │  │  └─ blog.thrift\n│  └─ test/\n│     └─ java/\n│        └─ example.armeria.server.blog.thrift/\n│           └─ BlogServiceTest.java\n└─ build.gradle\n")),(0,i.kt)("h3",{id:"buildgradle",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h3",href:"#buildgradle","aria-label":"buildgradle permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"build.gradle"),(0,i.kt)("p",null,"Here is a part of the ",(0,i.kt)("inlineCode",{parentName:"p"},"build.gradle")," file for the sample service.\nIf you are trying the tutorial from scratch, base your gradle file on the sample service's ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria-examples/blob/main/tutorials/thrift/build.gradle"},"build.gradle"),"."),(0,i.kt)(c,{mdxType:"Tip"},(0,i.kt)("p",null,"In this tutorial, we use ",(0,i.kt)("a",{parentName:"p",href:"https://gradle.org/"},"Gradle")," as the build tool and use ",(0,i.kt)("a",{parentName:"p",href:"https://plugins.gradle.org/plugin/org.jruyi.thrift"},"thrift-gradle-plugin")," to compile thrift IDL files and generate stubs.")),(0,i.kt)(h,{language:"groovy",filename:"build.gradle",mdxType:"CodeBlock"},'\nplugins {\n  id "org.jruyi.thrift" version "0.4.2"\n  id "application"\n  id "idea"\n  id "eclipse"\n}\n\nrepositories {\n  mavenCentral()\n}\n\ndependencies {\n  implementation "com.linecorp.armeria:armeria:'+l["com.linecorp.armeria:armeria-bom"]+'"\n\n  implementation "com.linecorp.armeria:armeria-thrift0.17:'+l["com.linecorp.armeria:armeria-bom"]+'"\n\n  // Logging\n  runtimeOnly "ch.qos.logback:logback-classic:'+l["ch.qos.logback:logback-classic"]+'"\n\n  testImplementation "org.junit.jupiter:junit-jupiter:'+l["org.junit:junit-bom"]+'"\n\n  testImplementation "com.linecorp.armeria:armeria-junit5:'+l["com.linecorp.armeria:armeria-bom"]+'"\n\n  testImplementation "org.assertj:assertj-core:'+l["org.assertj:assertj-core"]+"\"\n}\n\napplication {\n  mainClass.set('example.armeria.server.blog.thrift.Main')\n}\n\ntasks.withType(Test) {\n  useJUnitPlatform()\n}\n"),(0,i.kt)("h2",{id:"build-and-run-sample-service",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#build-and-run-sample-service","aria-label":"build and run sample service permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Build and run sample service"),(0,i.kt)("p",null,"Try running the sample service and see the outcome of this tutorial.\nUsing Armeria's ",(0,i.kt)("a",{parentName:"p",href:"/docs/server-docservice"},"Documentation Service"),", you can easily verify a server is running, receiving requests and sending responses."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Download the code from ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria-examples/tree/main/tutorials/thrift"},"here"),"."),(0,i.kt)("li",{parentName:"ol"},"Build the sample service using the Gradle Wrapper.",(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ ./gradlew build\n"))),(0,i.kt)("li",{parentName:"ol"},"Run the sample service again, using the Gradle Wrapper.",(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ ./gradlew run\n"))),(0,i.kt)("li",{parentName:"ol"},"Open the Documentation service page on your web browser at ",(0,i.kt)("a",{parentName:"li",href:"http://127.0.0.1:8080/docs"},"http://127.0.0.1:8080/docs"),".")),(0,i.kt)("h2",{id:"try-writing-blog-service-yourself",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#try-writing-blog-service-yourself","aria-label":"try writing blog service yourself permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Try writing blog service yourself"),(0,i.kt)("p",null,"Try writing the blog service yourself by following the guides in the given order:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"/tutorials/thrift/blog/create-service"},"Create a service")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"/tutorials/thrift/blog/run-server"},"Run a server")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"/tutorials/thrift/blog/define-service-methods"},"Define service methods")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"/tutorials/thrift/blog/implement-create"},"Implement CREATE")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"/tutorials/thrift/blog/implement-read"},"Implement READ")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"/tutorials/thrift/blog/implement-update"},"Implement UPDATE")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"/tutorials/thrift/blog/implement-delete"},"Implement DELETE"))))}g.isMDXComponent=!0},89791:function(e,t,r){r.d(t,{Z:function(){return o}});var a=r(25444),i=r(67294),n=JSON.parse('{"root":["index"],"Useful links":{"User manual":"/docs","API documentation":"https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/index.html","Release notes":"/release-notes"},"REST service":["rest/blog","rest/blog/create-server","rest/blog/prepare-data-object","rest/blog/add-services-to-server","rest/blog/implement-create","rest/blog/implement-read","rest/blog/implement-update","rest/blog/implement-delete"],"gRPC service":["grpc/blog","grpc/blog/define-service","grpc/blog/run-service","grpc/blog/implement-create","grpc/blog/implement-read","grpc/blog/implement-update","grpc/blog/implement-delete","grpc/blog/add-docservice"],"Thrift service":["thrift/blog","thrift/blog/create-service","thrift/blog/run-server","thrift/blog/define-service-methods","thrift/blog/implement-create","thrift/blog/implement-read","thrift/blog/implement-update","thrift/blog/implement-delete"]}'),l=r(46731),o=function(e){var t=(0,a.useStaticQuery)("3172452987").allMdx.nodes;return i.createElement(l.Z,Object.assign({},e,{candidateMdxNodes:t,index:n,prefix:"tutorials",menuTitle:!0,pageTitleSuffix:"Armeria tutorial"}))}}}]);
//# sourceMappingURL=component---src-pages-tutorials-thrift-blog-index-mdx-de00acee53d91dbe63d3.js.map